import { describe, it, expect, beforeAll } from 'vitest'
import {
  setupGlobalTestEnvironment,
  TEST_CONFIG,
  createTestDirectory,
  cleanupTestDirectory
} from './fixtures/test-setup'

// {{ properCase name }} tests
describe('{{ kebabCase name }}', () => {
  beforeAll(async () => {
    await setupGlobalTestEnvironment()
  })

  it('happy path: returns expected shape', async () => {
    // TODO: replace with real import/call
    const result = { ok: true, items: [{ id: 1 }] }
    expect(result.ok).toBe(true)
    expect(Array.isArray(result.items)).toBe(true)
  }, TEST_CONFIG.DEFAULT_TIMEOUT)

  it('edge case: handles empty data gracefully', async () => {
    const result = { ok: true, items: [] }
    expect(result.items.length).toBe(0)
  }, TEST_CONFIG.DEFAULT_TIMEOUT)

  // Example for features needing temp data directory
  // it('works with an isolated test directory', async () => {
  //   const cfg = createTestDirectory('{{ kebabCase name }}-spec')
  //   try {
  //     // your logic that reads/writes cfg.dataDir / cfg.recordsDir
  //     expect(cfg.dataDir).toBeTruthy()
  //   } finally {
  //     cleanupTestDirectory(cfg)
  //   }
  // }, TEST_CONFIG.DEFAULT_TIMEOUT)
})