# User Roles and Permissions Configuration
# This file defines user roles, their permissions, and status transitions

_metadata:
  name: 'User Roles & Permissions'
  description: 'Define user roles, permissions, and status transitions'
  version: '1.0.0'
  editable: true

# User Roles Definition
roles:
  admin:
    name:
      value: 'Administrator'
      type: 'string'
      description: 'Role display name'
      required: true
    description:
      value: 'Full system access'
      type: 'string'
      description: 'Role description'
      required: true
    permissions:
      value:
        - '*'
        - 'records:import'
        - 'records:export'
        - 'templates:view'
        - 'templates:manage'
        - 'hooks:view'
        - 'hooks:manage'
        - 'workflows:manage'
      type: 'array'
      description: 'List of permissions granted to this role'
      required: true
    status_transitions:
      value:
        - 'draft'
        - 'review'
        - 'approved'
        - 'rejected'
        - 'archived'
      type: 'array'
      description: 'Record statuses this role can transition to'
      required: true

  clerk:
    name:
      value: 'Clerk'
      type: 'string'
      description: 'Role display name'
      required: true
    description:
      value: 'Can create and edit records, manage users'
      type: 'string'
      description: 'Role description'
      required: true
    permissions:
      value:
        - 'records:create'
        - 'records:edit'
        - 'records:view'
        - 'records:list'
        - 'users:view'
        - 'users:edit'
        - 'users:create'
        - 'users:delete'
        - 'templates:view'
      type: 'array'
      description: 'List of permissions granted to this role'
      required: true
    status_transitions:
      value:
        - 'draft'
        - 'review'
      type: 'array'
      description: 'Record statuses this role can transition to'
      required: true

  public:
    name:
      value: 'Public'
      type: 'string'
      description: 'Role display name'
      required: true
    description:
      value: 'Read-only access'
      type: 'string'
      description: 'Role description'
      required: true
    permissions:
      value:
        - 'records:view'
        - 'records:list'
      type: 'array'
      description: 'List of permissions granted to this role'
      required: true
    status_transitions:
      value: []
      type: 'array'
      description: 'Record statuses this role can transition to'
      required: true

# Role Hierarchy (who can manage whom)
role_hierarchy:
  admin:
    value:
      - 'clerk'
      - 'public'
    type: 'array'
    description: 'Roles that admin can manage'
    required: true
  clerk:
    value:
      - 'public'
    type: 'array'
    description: 'Roles that clerk can manage'
    required: true
  public:
    value: []
    type: 'array'
    description: 'Roles that public users can manage'
    required: true

# Default role for new users
default_role:
  value: 'public'
  type: 'array'
  options:
    [
      { value: 'admin', label: 'Administrator' },
      { value: 'clerk', label: 'Clerk' },
      { value: 'public', label: 'Public' },
    ]
  description: 'Default role assigned to new users'
  required: true
